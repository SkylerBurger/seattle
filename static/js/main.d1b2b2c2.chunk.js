(window["webpackJsonpcdp-frontend"]=window["webpackJsonpcdp-frontend"]||[]).push([[0],{281:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=281},342:function(e,t,n){e.exports=n(653)},347:function(e,t,n){},653:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(42),c=n.n(i),o=(n(347),n(120)),l=n(96),u=n(155),s=n(334),m=n(307),p=n(335),d=n(65);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(e){o.a.set(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach(function(t){Object(d.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({page:e},t)),o.a.pageview(e)};return function(t){function a(){return Object(l.a)(this,a),Object(s.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(p.a)(a,t),Object(u.a)(a,[{key:"componentDidMount",value:function(){n(window.location.hash.substr(1))}},{key:"componentDidUpdate",value:function(e){var t=this.props.location.pathname,a=e.location.pathname;t!==a&&n(a)}},{key:"render",value:function(){return r.a.createElement(e,this.props)}}]),a}(a.Component)}var v=n(36),b=n(67),E=n(671),w=n(662),y=n(7),g=y.a.h1({}),O=Object(y.a)("span")({transition:".8s all",borderRadius:"5px",padding:"1rem .5rem",":hover":{backgroundColor:"#F5F5F5",color:"black"}}),x=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{vertical:!0},r.a.createElement(w.a,null,r.a.createElement(v.b,{to:"/"},r.a.createElement(g,null,"Council Data Project")))),r.a.createElement(E.a,{vertical:!0},r.a.createElement(w.a,null,r.a.createElement(v.b,{to:"/events"},r.a.createElement(O,null,"Events")),r.a.createElement(v.b,{to:"/people"},r.a.createElement(O,{style:{marginLeft:"10px"}},"People")))))},j=n(673),k=n(674),P=n(668),S=function(){return r.a.createElement(E.a,{inverted:!0,vertical:!0,style:{padding:"5em 0em"}},r.a.createElement(w.a,null,r.a.createElement(j.a,{inverted:!0,stackable:!0},r.a.createElement(j.a.Row,{columns:"equal"},r.a.createElement(j.a.Column,null,r.a.createElement(k.a,{inverted:!0,as:"h4",content:"About"}),r.a.createElement(P.a,{link:!0,inverted:!0},r.a.createElement(P.a.Item,{as:"a"},"The Project"),r.a.createElement(P.a.Item,{as:"a"},"The Team"),r.a.createElement(P.a.Item,{as:"a"},"Other Work"))),r.a.createElement(j.a.Column,null,r.a.createElement(k.a,{inverted:!0,as:"h4",content:"Seattle"}),r.a.createElement(P.a,{link:!0,inverted:!0},r.a.createElement(P.a.Item,{as:"a"},"City of Seattle"),r.a.createElement(P.a.Item,{as:"a"},"Seattle Open Data"),r.a.createElement(P.a.Item,{as:"a"},"Seattle Channel"))),r.a.createElement(j.a.Column,null,r.a.createElement(k.a,{inverted:!0,as:"h4",content:"Developers"}),r.a.createElement(P.a,{link:!0,inverted:!0},r.a.createElement(P.a.Item,{as:"a"},"Council Data Project"),r.a.createElement(P.a.Item,{as:"a"},"Seattle Specific"),r.a.createElement(P.a.Item,{as:"a"},"Transcription Runner")))),r.a.createElement(j.a.Row,null,r.a.createElement("p",null,"This web application is not funded by, nor associated with the Seattle City Council. This is a prototype web application to show the viability of an automated and collaborativly sourced city council transcription service. The transcripts are roughly ninty-percent accurate, and therefore may not represent what was actually said.")))))},_=n(9),C=n.n(_),R=n(21),I=n(25),A=n(663),D=n(655),T=Object(y.a)(w.a)({minHeight:"100vh"}),B=Object(y.a)(w.a)({marginTop:"2em !important",marginBottom:"5em !important"}),H=Object(y.a)(A.a)({width:"50% !important"}),L=Object(y.a)(j.a)({display:"block",marginTop:"150px !important"}),M=function(e){var t=r.a.useState(""),n=Object(I.a)(t,2),a=n[0],i=n[1],c=function(){var e=Object(R.a)(C.a.mark(function e(t,n){var a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=n.value,i(a);case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}();return r.a.createElement(T,null,r.a.createElement(B,null,r.a.createElement(L,{verticalAlign:"middle",centered:!0},r.a.createElement(j.a.Row,null,r.a.createElement("h1",null,"Search City Council Transcripts")),r.a.createElement(j.a.Row,null,r.a.createElement(H,{placeholder:"Enter a keyword to search meeting transcripts",value:a,onChange:c,onKeyPress:function(t){"Enter"===t.key&&e.history.push("/search?q=".concat(a))}}),r.a.createElement(D.a,{attached:"right",primary:!0,as:v.b,to:"/search?q=".concat(a)},"Search")))))},U=n(314),z=n.n(U),N=n(666),F=n(43),q=n.n(F),W=n(118),V=n.n(W),Q=(n(654),n(315)),Y=n.n(Q),J=n(53);n(558);function K(e){return Z.apply(this,arguments)}function Z(){return(Z=Object(R.a)(C.a.mark(function e(t){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(t).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(n,!0).forEach(function(t){Object(d.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var X={eq:"==",contains:"array-contains",gt:">",lt:"<",gteq:">=",lteq:"<="},ee={asc:"asc",desc:"desc"},te=function e(t){Object(l.a)(this,e);var n=new Error("Unsure how to create WhereCondition from received data: ".concat(t));if(t instanceof Array)if(2===t.length)this.columnName=t[0],this.operator=X.eq,this.value=t[1];else{if(3!==t.length)throw n;if(!Object.values(X).includes(t[1]))throw new Error("\n                        Unknown WhereCondition operator: ".concat(t[1],"\n                        Allowed WhereCondition operators: ").concat(Object.values(X),"\n                    "));this.columnName=t[0],this.operator=t[1],this.value=t[2]}else{if(!(t instanceof Object))throw n;if(t.columnName&&t.operator&&t.value){if(!Object.values(X).includes(t.operator))throw new Error("\n                        Unknown WhereCondition operator: ".concat(t.operator,"\n                        Allowed WhereCondition operators: ").concat(Object.values(X),"\n                    "));this.columnName=t.columnName,this.operator=t.operator,this.value=t.value}else{if(!t.columnName||!t.value)throw n;this.columnName=t.columnName,this.operator=X.eq,this.value=t.value}}},ne=function e(t){Object(l.a)(this,e);var n,a=new Error("Unsure how to create OrderCondition from received data: ".concat(t));if("string"===typeof(n=t)||n instanceof String)this.columnName=t,this.operator=ee.desc;else if(t instanceof Array)if(1===t.length)this.columnName=t[0],this.operator=ee.desc;else{if(2!==t.length)throw a;if(!Object.values(ee).includes(t[1]))throw new Error("\n                        Unknown OrderCondition operator: ".concat(t[1],"\n                        Allowed OrderCondition operators: ").concat(Object.values(ee),"\n                    "));this.columnName=t[0],this.operator=t[1]}else{if(!(t instanceof Object))throw a;if(t.columnName&&t.operator){if(!Object.values(ee).includes(t.operator))throw new Error("\n                        Unknown OrderCondition operator: ".concat(t.operator,"\n                        Allowed OrderCondition operators: ").concat(Object.values(ee),"\n                    "));this.columnName=t.columnName,this.operator=t.operator}else{if(!t.columnName)throw a;this.columnName=t.columnName,this.operator=ee.desc}}},ae=new(function(){function e(t){Object(l.a)(this,e),this.credentials=t,V.a.initializeApp(this.credentials),this.connection=V.a.firestore()}return Object(u.a)(e,[{key:"selectRowById",value:function(){var e=Object(R.a)(C.a.mark(function e(t,n){var a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.connection.collection(t).doc(n).get();case 3:return a=e.sent,e.abrupt("return",a.data());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 10:case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t,n){return e.apply(this,arguments)}}()},{key:"_unpackQueryResults",value:function(){var e=Object(R.a)(C.a.mark(function e(t){var n;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],t.forEach(function(e){var t=e.data(),a=$({id:e.id},t);n.push(a)}),e.abrupt("return",n);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"selectRowsAsArray",value:function(){var e=Object(R.a)(C.a.mark(function e(t){var n,a,r,i,c,o=arguments;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:[],a=o.length>2&&void 0!==o[2]?o[2]:void 0,r=o.length>3&&void 0!==o[3]?o[3]:1e3,e.prev=3,i=this.connection.collection(t),n.forEach(function(e){i=i.where(e.columnName,e.operator,e.value)}),a&&(i=i.orderBy(a.columnName,a.operator)),i=i.limit(r),e.next=11,i.get().catch(function(e){throw new Error("Failed to retrieve data from database. Error: ".concat(e))});case 11:return c=e.sent,e.next=14,this._unpackQueryResults(c);case 14:return e.abrupt("return",e.sent);case 17:return e.prev=17,e.t0=e.catch(3),e.abrupt("return",Promise.reject(e.t0));case 20:case 21:case"end":return e.stop()}},e,this,[[3,17]])}));return function(t){return e.apply(this,arguments)}}()}]),e}())({apiKey:"AIzaSyA7aO6weBcOUBZLmxE3aMyn4NeElVEHZUc",authDomain:"cdp-sea.firebaseapp.com",projectId:"cdp-seattle",databaseURL:"https://cdp-sea.firebaseio.com"});function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(n,!0).forEach(function(t){Object(d.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ce=V.a.storage();function oe(){return le.apply(this,arguments)}function le(){return(le=Object(R.a)(C.a.mark(function e(){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.selectRowsAsArray("event",[],new ne(["event_datetime",ee.desc]));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ue(e,t){return se.apply(this,arguments)}function se(){return(se=Object(R.a)(C.a.mark(function e(t,n){var a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ae.selectRowsAsArray("event_minutes_item",[new te(["event_id",X.eq,t])],new ne(["index",n]));case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 10:case 11:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function me(e){return pe.apply(this,arguments)}function pe(){return(pe=Object(R.a)(C.a.mark(function e(t){var n,a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ae.selectRowById("minutes_item",t.minutes_item_id);case 3:return n=e.sent,e.next=6,ae.selectRowsAsArray("minutes_item_file",[new te(["minutes_item_id",X.eq,t.minutes_item_id])],new ne(["name",ee.asc]));case 6:return a=e.sent,e.abrupt("return",ie({},t,{minutes_item:ie({id:t.minutes_item_id},n,{file:a})}));case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 13:case 14:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}function de(e){return fe.apply(this,arguments)}function fe(){return(fe=Object(R.a)(C.a.mark(function e(t){var n;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ae.selectRowById("body",t);case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function he(e){return ve.apply(this,arguments)}function ve(){return(ve=Object(R.a)(C.a.mark(function e(t){var n,a,r,i,c,o;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ae.selectRowsAsArray("transcript",[new te(["event_id",X.eq,t])]);case 3:return n=e.sent,a=Object(I.a)(n,1),r=a[0],e.next=8,ae.selectRowById("file",r.file_id);case 8:return i=e.sent,c=ce.refFromURL(i.uri),e.next=12,c.getDownloadURL().then(function(e){return K(e)});case 12:return o=e.sent,e.abrupt("return",o);case 16:return e.prev=16,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 19:case"end":return e.stop()}},e,null,[[0,16]])}))).apply(this,arguments)}function be(e){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(R.a)(C.a.mark(function e(t){var n,a,r,i,c;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.filter(function(e){return null!==e.decision}),a=[],n.forEach(function(e){a.push({matter:e.minutes_item.matter,name:e.minutes_item.name,id:e.id,decision:e.decision,index:e.index})}),r=a.map(function(e){return ae.selectRowsAsArray("vote",[new te(["event_minutes_item_id",X.eq,e.id])])}),e.next=6,Promise.all(r);case 6:return i=e.sent,e.next=9,ae.selectRowsAsArray("person");case 9:return c=e.sent,a.forEach(function(e,t){var n=i[t],a=[];n.forEach(function(e){var t=c.find(function(t){return t.id===e.person_id});a.push({decision:e.decision,person_id:e.person_id,full_name:t.full_name})}),e.formattedIndividualVotes=Object(J.sortBy)(a,function(e){return e.full_name})}),e.abrupt("return",a);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function we(e){return ye.apply(this,arguments)}function ye(){return(ye=Object(R.a)(C.a.mark(function e(t){var n,a,r,i,c,o;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ae.selectRowById("event",t);case 3:return n=e.sent,e.next=6,de(n.body_id);case 6:return a=e.sent,e.next=9,ue(t,ee.asc);case 9:return r=e.sent,e.next=12,Promise.all(r.map(function(e){return me(e)}));case 12:return i=e.sent,e.next=15,he(t);case 15:return c=e.sent,e.next=18,be(i);case 18:return o=e.sent,e.abrupt("return",{id:t,name:a.name,description:a.description,videoUrl:n.video_uri,date:q.a.utc(n.event_datetime.toMillis()).toISOString(),minutes:i,transcript:c.data,scPageUrl:n.source_uri,votes:o});case 22:return e.prev=22,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 25:case"end":return e.stop()}},e,null,[[0,22]])}))).apply(this,arguments)}function ge(e){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(R.a)(C.a.mark(function e(t){var n,a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ae.selectRowById("event",t);case 3:return n=e.sent,e.next=6,de(n.body_id);case 6:return a=e.sent,e.abrupt("return",{id:t,name:a.name,description:a.description,date:q.a.utc(n.event_datetime.toMillis()).toISOString()});case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 13:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}function xe(e){return je.apply(this,arguments)}function je(){return(je=Object(R.a)(C.a.mark(function e(t){var n,a,r,i,c,o;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,e.prev=1,Y.a.PorterStemmer.attach(),a=t.tokenizeAndStem(),e.next=6,Promise.all(a.map(function(e){return ae.selectRowsAsArray("indexed_event_term",[new te(["term",X.eq,e])])}));case 6:return r=e.sent,i=Object(J.mapValues)(Object(J.groupBy)(Object(J.flatten)(r),function(e){return e.event_id}),function(e,t){return e.reduce(function(e,t){return ie({},e,{value:e.value+t.value})},{event_id:t,value:0})}),c=Object(J.reverse)(Object(J.sortBy)(Object(J.filter)(i,function(e){return e.value>=n}),function(e){return e.value})),e.next=11,Promise.all(c.map(function(e){return ge(e.event_id)}));case 11:return o=e.sent,e.abrupt("return",o);case 15:return e.prev=15,e.t0=e.catch(1),e.abrupt("return",Promise.reject(e.t0));case 18:case"end":return e.stop()}},e,null,[[1,15]])}))).apply(this,arguments)}function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(n,!0).forEach(function(t){Object(d.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Se(){return _e.apply(this,arguments)}function _e(){return(_e=Object(R.a)(C.a.mark(function e(){var t;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.selectRowsAsArray("person",[],new ne(["full_name",ee.asc]));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ce(e){return Re.apply(this,arguments)}function Re(){return(Re=Object(R.a)(C.a.mark(function e(t){var n,a,r,i,c,o,l,u,s,m,p;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,ae.selectRowById("person",t);case 3:return a=e.sent,e.next=6,ae.selectRowsAsArray("vote",[new te(["person_id",X.eq,t])]);case 6:return r=e.sent,i=r.map(function(e){return ae.selectRowById("event_minutes_item",e.event_minutes_item_id)}),e.next=10,Promise.all(i);case 10:return c=e.sent,o=c.map(function(e){return ae.selectRowById("minutes_item",e.minutes_item_id)}),e.next=14,Promise.all(o);case 14:return l=e.sent,u=c.map(function(e){return ae.selectRowById("event",e.event_id)}),e.next=18,Promise.all(u);case 18:return s=e.sent,e.next=21,ae.selectRowsAsArray("body");case 21:return m=e.sent,r.forEach(function(e,t){var a=c[t],r=l[t],i=s[t],o=m.find(function(e){return e.id===i.body_id}),u={id:e.id,matter:r.matter,name:r.name,voteForPerson:e.decision,decision:a.decision,eventId:a.event_id,index:a.index,eventDate:q.a.utc(i.event_datetime.toMillis()).toISOString(),body_name:o.name};n.push(u)}),p=Object(J.orderBy)(n,["eventDate","index"],["desc","desc"]),e.abrupt("return",Pe({},a,{votes:p}));case 25:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Ie=n(669),Ae=function(e){return q.a.utc(e).format("MMMM D, YYYY h:mm A")},De=Object(y.a)(Ie.a)({boxShadow:"none !important"}),Te=Object(y.a)(Ie.a.Content)({padding:"0 !important"}),Be=function(e){var t=e.name,n=e.date,a=e.description,i=e.link;return r.a.createElement(De,{fluid:!0},r.a.createElement(Te,null,r.a.createElement(Ie.a.Header,null,r.a.createElement(v.b,{to:i},t)),r.a.createElement(Ie.a.Meta,null,Ae(n)),r.a.createElement(Ie.a.Description,null,a)))},He=function(e){var t=e.events;return r.a.createElement(Ie.a.Group,{centered:!0},t.map(function(e){var t=e.name,n=e.date,a=e.description,i=e.id;return r.a.createElement(Be,{key:i,name:t,date:n,description:a,link:"/events/".concat(i)})}))};var Le=function(e){r.a.useEffect(function(){return document.title=e,function(){document.title="Council Data Project - Seattle"}},[e])},Me=y.a.div({margin:"1em 0 3em !important"}),Ue=Object(y.a)(A.a)({width:"50% !important",marginBottom:"1em"}),ze=y.a.span({display:"block",color:"grey",paddingLeft:"15px"}),Ne=y.a.div({paddingLeft:"15px"}),Fe=Object(y.a)(N.a)({marginLeft:"15px !important"}),qe=function(e){var t=e.query,n=r.a.useState(t),a=Object(I.a)(n,2),i=a[0],c=a[1],o=r.a.useState(!1),l=Object(I.a)(o,2),u=l[0],s=l[1],m=r.a.useState([]),p=Object(I.a)(m,2),d=p[0],f=p[1],h=r.a.useState([]),v=Object(I.a)(h,2),b=v[0],E=v[1];Le("Search - ".concat(i));r.a.useEffect(function(){Object(R.a)(C.a.mark(function e(){var t;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=8;break}return s(!0),e.next=4,xe(i);case 4:t=e.sent,f(t),E(t),s(!1);case 8:case"end":return e.stop()}},e)}))()},[]);var w=function(){var e=Object(R.a)(C.a.mark(function e(t,n){var a,r;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.value,c(a),s(!0),e.next=5,xe(a);case 5:r=e.sent,f(r),E(r),s(!1);case 9:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Me,null,r.a.createElement(Ue,{placeholder:"Search by event name",value:i,onChange:w,loading:u}),r.a.createElement(Fe,{placeholder:"Filter by date range",options:[{key:"-1",value:"all",text:"All"},{key:"0.25",value:"0.25",text:"Past week"},{key:"1",value:"1",text:"Past month"},{key:"3",value:"3",text:"Past 3 months"},{key:"6",value:"6",text:"Past 6 months"},{key:"12",value:"12",text:"Past year"}],onChange:function(e,t){var n=t.value;if("all"===n)E(d);else{var a=q.a.utc().subtract(n,"months");E(d.filter(function(e){return function(e){return q.a.utc(e).isAfter(a)}(e.date)}))}}}),""!==i&&r.a.createElement(ze,null,b.length," results")),r.a.createElement(Ne,null,r.a.createElement(He,{events:b})))},We=Object(y.a)(w.a)({minHeight:"100vh"}),Ve=Object(y.a)(w.a)({marginTop:"2em !important",marginBottom:"5em !important"}),Qe=function(e){var t=e.location,n=z.a.parse(t.search).q;return r.a.createElement(We,null,r.a.createElement(Ve,null,r.a.createElement(qe,{query:n})))},Ye=n(665),Je=n(68),Ke=n(63),Ze=n(330),Ge=n.n(Ze);var $e=function(e){e=parseInt(e,10);var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),a=e-3600*t-60*n;return t<10&&(t="0"+t),n<10&&(n="0"+n),a<10&&(a="0"+a),t+":"+n+":"+a},Xe=y.a.div({display:"flex",flexWrap:"wrap",alignItems:"center",margin:"1em 0",padding:"0.2em"}),et=y.a.div(function(e){return{width:e.isSearch?"100%":"85%",order:e.isSearch?"0":"1",boxSizing:"border-box",fontSize:"16px",lineHeight:"1.5em","@media(max-width:720px)":{width:"100%",order:"0"}}}),tt=y.a.div(function(e){return{width:e.isSearch?"100%":"15%",order:e.isSearch?"1":"0",boxSizing:"border-box",padding:e.isSearch?"0":"0.5em","@media(max-width:720px)":{width:"100%",padding:"0",order:"1"}}}),nt=r.a.memo(function(e){var t=e.searchText,n=e.transcript,a=e.handleSeek,i=e.isSearch,c=r.a.useRef(null),o=new Je.c({fixedWidth:!0,defaultHeight:100});r.a.useEffect(function(){var e=function(){c.current&&c.current.updatePosition()};return document.addEventListener("update-scroll-position",e),function(){document.removeEventListener("update-scroll-position",e)}},[]);var l=function(){o.clearAll()},u=function(e){var c=e.index,l=e.parent,u=e.key,s=e.style;return r.a.createElement(Je.b,{key:u,cache:o,parent:l,columnIndex:0,rowIndex:c},r.a.createElement("div",{style:s},r.a.createElement(Xe,null,r.a.createElement(tt,{isSearch:i},r.a.createElement(D.a,{size:"tiny",onClick:function(){return a(n[c].start_time)}},r.a.createElement(Ke.a,{name:"play"}),$e(n[c].start_time))),r.a.createElement(et,{isSearch:i},r.a.createElement(Ge.a,{searchWords:[t],autoEscape:!0,textToHighlight:n[c].text})))))};return i?r.a.createElement(Je.a,{onResize:l},function(e){var t=e.width,a=e.height;return r.a.createElement(Je.d,{deferredMeasurementCache:o,height:a,rowCount:n.length,rowHeight:o.rowHeight,rowRenderer:u,scrollToIndex:0,style:{willChange:""},width:t})}):r.a.createElement(Je.e,{ref:c},function(e){var t=e.height,a=e.isScrolling,i=e.onChildScroll,c=e.scrollTop;return r.a.createElement(Je.a,{disableHeight:!0,onResize:l},function(e){var l=e.width;return r.a.createElement(Je.d,{autoHeight:!0,deferredMeasurementCache:o,height:t,isScrolling:a,onScroll:i,rowCount:n.length,rowHeight:o.rowHeight,rowRenderer:u,scrollTop:c,style:{willChange:""},width:l})})})}),at=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return-1!==e.toLowerCase().indexOf(t.toLowerCase())},rt=y.a.div({margin:"1em 0",width:"100%",display:"flex",flexDirection:"column",boxSizing:"border-box","@media (min-aspect-ratio:5/4), (min-width:1200px)":{width:"40%",margin:"0"}}),it=y.a.h2({width:"100%"}),ct=Object(y.a)(A.a)({width:"100%",fontSize:"16px !important",lineHeight:"1.5 !important"}),ot=y.a.span({display:"block",marginTop:"1em",color:"grey",paddingLeft:"15px"}),lt=y.a.span({display:"block",marginTop:"1em",fontSize:"16px !important",lineHeight:"1.5 !important",paddingLeft:"15px"}),ut=y.a.div({marginTop:"1em",border:"1px solid lightgray",borderRadius:"0.28rem",boxSizing:"border-box",minHeight:"calc(.5625 * 90vw)","@media (min-aspect-ratio:5/4), (min-width:1200px)":{flex:"1 1 auto",minHeight:"0"}}),st=function(e){var t=e.transcript,n=e.handleSeek,a=e.mediaQueriesMatches,i=r.a.useState(""),c=Object(I.a)(i,2),o=c[0],l=c[1],u=t.filter(function(e){var t=e.text;return at(t,o)});return r.a.createElement(rt,null,r.a.createElement(it,null,"Search Transcript"),r.a.createElement(ct,{onChange:function(e,t){var n=t.value;l(n),a||document.dispatchEvent(new CustomEvent("update-scroll-position"))},value:o,placeholder:"Search transcript"}),""!==o&&r.a.createElement(ot,null,u.length," results"),""!==o&&u.length>0&&r.a.createElement(ut,null,r.a.createElement(nt,{searchText:o,transcript:u,handleSeek:n,isSearch:!0})),""===o&&r.a.createElement(lt,null,"Enter a search term to get results."))},mt=n(670),pt=n(664),dt=y.a.ol({listStylePosition:"outside",paddingLeft:"1.5em"}),ft=y.a.div({fontSize:"1em",fontWeight:"500"}),ht=y.a.div({fontSize:"0.95em"}),vt=y.a.ul({listStylePosition:"outside",listStyleType:"disc",paddingLeft:"2em"}),bt=function(e){var t=e.minutes,n=e.scPageUrl;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Minutes"),r.a.createElement(dt,null,t.map(function(e){var t=e.minutes_item;return r.a.createElement("li",{key:t.id},r.a.createElement(ft,null,t.matter?t.matter:t.name),t.matter&&t.matter!==t.name&&r.a.createElement(ht,null,t.name),t.file.length>0&&r.a.createElement(vt,null,t.file.map(function(e){var t=e.id,n=e.name,a=e.uri;return r.a.createElement("li",{key:t},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:a},n))})))})),r.a.createElement("h3",null,"Links"),r.a.createElement("a",{href:n},"Seattle Channel Event Page"))},Et=n(667),wt=[{accessor:"matter",text:"Matter",width:"2"},{accessor:"decision",text:"Decision",width:"1"},{accessor:"name",text:"Name",width:"6"},{accessor:"votingRecords",text:"Vote",width:"5"}],yt=Object(y.a)("div")({display:"flex"}),gt=Object(y.a)("div")({width:"70%"}),Ot=Object(y.a)("div")({width:"30%"}),xt=Object(y.a)(Et.a.Header)({"@media(max-width:767px)":{display:"none !important"}}),jt=function(e){var t=e.votingData,n=e.isPerson;return r.a.createElement(Et.a,{striped:!0},r.a.createElement(xt,null,r.a.createElement(Et.a.Row,null,wt.map(function(e){return r.a.createElement(Et.a.HeaderCell,{key:e.text},e.text)}),n&&r.a.createElement(Et.a.HeaderCell,{key:"Event"},"Event"))),r.a.createElement(Et.a.Body,null,t.map(function(e){return r.a.createElement(Et.a.Row,{key:e.id},wt.map(function(t){return"votingRecords"!==t.accessor?r.a.createElement(Et.a.Cell,{key:t.accessor,width:t.width},e[t.accessor]):e.formattedIndividualVotes?r.a.createElement(Et.a.Cell,{key:t.accessor,width:t.width},e.formattedIndividualVotes.map(function(e){return r.a.createElement(yt,{key:e.full_name},r.a.createElement(gt,null,r.a.createElement(v.b,{to:"/people/".concat(e.person_id)},e.full_name)),r.a.createElement(Ot,null,e.decision))})):r.a.createElement(r.a.Fragment,{key:t.accessor},r.a.createElement(Et.a.Cell,{width:"1"},e.voteForPerson),r.a.createElement(Et.a.Cell,null,r.a.createElement(v.b,{to:"/events/".concat(e.eventId)},r.a.createElement("span",null,e.body_name)),r.a.createElement("div",null,Ae(e.eventDate))))}))})))},kt=y.a.div({margin:"1em 0",width:"100%",fontSize:"16px",lineHeight:"1.5","a.item":{fontSize:"1.3em !important"}}),Pt=Object(y.a)(mt.a)({borderBottom:"0 !important",marginBottom:"1em !important",paddingTop:"1em !important",backgroundColor:"white !important",zIndex:"0 !important",width:"100%"}),St=r.a.memo(function(e){var t=e.minutes,n=e.scPageUrl,a=e.transcript,i=e.votes,c=e.handleSeek,o=e.topOffset,l=e.mediaQueriesMatches,u=r.a.useState("details"),s=Object(I.a)(u,2),m=s[0],p=s[1],d=r.a.useRef(null);r.a.useEffect(function(){d.current.getBoundingClientRect().top<0&&(d.current.scrollIntoView(!0),l||window.scrollBy(0,-o))},[m,l,o]);var f=function(e,t){var n=t.name;p(n)};return r.a.createElement(kt,{ref:d},r.a.createElement(pt.a,{context:d,offset:o,styleElement:{zIndex:"1"}},r.a.createElement(Pt,{secondary:!0,pointing:!0},r.a.createElement(mt.a.Item,{active:"details"===m,name:"details",onClick:f}),r.a.createElement(mt.a.Item,{active:"transcript"===m,name:"transcript",onClick:f}),r.a.createElement(mt.a.Item,{active:"votes"===m,name:"votes",onClick:f}))),{details:r.a.createElement(bt,{minutes:t,scPageUrl:n}),transcript:r.a.createElement(nt,{searchText:"",transcript:a,handleSeek:c,isSearch:!1}),votes:i.length?r.a.createElement(jt,{votingData:i}):r.a.createElement("div",null,"No votes found for this event.")}[m])}),_t=n(332),Ct=n.n(_t),Rt=y.a.div({display:"flex",flexWrap:"wrap",justifyContent:"space-between"}),It=y.a.div({width:"100%",margin:"1em 0"}),At=y.a.h5({margin:"0.1em 0",color:"grey",fontWeight:"400"}),Dt=y.a.div({position:"absolute",left:"0",right:"0",visibility:"hidden",height:"90px",backgroundColor:"yellow"}),Tt=y.a.div(function(e){return{position:"relative",display:"none","@media (min-aspect-ratio:5/4), (min-width:1200px)":{display:e.isFixed?"block":"none",width:"59%"}}}),Bt=y.a.div({position:"absolute",top:"0",left:"0",backgroundColor:"black",height:"100%",width:"100%"}),Ht=y.a.div(function(e){return{width:"100%",position:e.isPip?"relative":"sticky",top:"0",zIndex:"2","@media (min-aspect-ratio:5/4), (min-width:1200px)":{position:e.isFixed&&!e.isPip?"fixed":"relative",width:e.isFixed&&!e.isPip?"20vw":"59%",right:"0"}}}),Lt=y.a.div({position:"relative",paddingTop:"56.25%"}),Mt=Object(y.a)(Ct.a)({position:"absolute",top:"0",left:"0"}),Ut=function(e){e.id;var t=e.title,n=e.date,a=e.minutes,i=e.scPageUrl,c=e.videoUrl,o=e.transcript,l=e.votes,u=r.a.useRef(null),s=r.a.useRef(null),m=r.a.useState(!1),p=Object(I.a)(m,2),d=p[0],f=p[1],h=r.a.useState(!1),v=Object(I.a)(h,2),b=v[0],E=v[1],w=r.a.useState(window.matchMedia("(min-aspect-ratio:5/4), (min-width:1200px)").matches),y=Object(I.a)(w,2),g=y[0],O=y[1],x=r.a.useState(0),j=Object(I.a)(x,2),k=j[0],P=j[1];r.a.useEffect(function(){var e=new IntersectionObserver(function(e,t){g&&!d&&(e[0].intersectionRatio>=.1&&e[0].isIntersecting?E(!1):E(!0))},{root:null,rootMargin:"0px",threshold:.1});return e.observe(u.current),function(){e.disconnect()}},[d,g]),r.a.useEffect(function(){var e=s.current.getInternalPlayer(),t=function(){E(!1),f(!0)},n=function(){f(!1)};return e.addEventListener("enterpictureinpicture",t),e.addEventListener("leavepictureinpicture",n),function(){e.removeEventListener("enterpictureinpicture",t),e.removeEventListener("leavepictureinpicture",n)}},[]),r.a.useEffect(function(){var e=function(){var e=window.matchMedia("(min-aspect-ratio:5/4), (min-width:1200px)");e.matches?P(0):P(s.current.getInternalPlayer().offsetHeight),O(e.matches)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}},[]);var S=function(e){s.current.seekTo(parseFloat(e));var t=s.current.getInternalPlayer();t.paused&&s.current.getCurrentTime()>0&&t.play()};return r.a.createElement(Rt,null,r.a.createElement(It,null,r.a.createElement("h1",null,t),r.a.createElement(At,null,"Meeting Date: ",Ae(n))),r.a.createElement(Dt,{ref:u}),r.a.createElement(Tt,{isFixed:b},r.a.createElement(Lt,null,r.a.createElement(Bt,null))),r.a.createElement(Ht,{isPip:d,isFixed:b},r.a.createElement(Lt,null,r.a.createElement(Mt,{ref:s,url:c,onReady:function(){g||P(s.current.getInternalPlayer().offsetHeight)},controls:!0,height:"100%",width:"100%"}))),r.a.createElement(st,{transcript:o,handleSeek:S,mediaQueriesMatches:g}),r.a.createElement(St,{minutes:a,scPageUrl:i,transcript:o,votes:l,handleSeek:S,topOffset:k,mediaQueriesMatches:g}))},zt=function(e){var t=e.id,n=r.a.useState(),a=Object(I.a)(n,2),i=a[0],c=a[1];return Le(i?"".concat(i.name," - ").concat(Ae(i.date)):"Loading..."),r.a.useEffect(function(){try{Object(R.a)(C.a.mark(function e(){var n;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we(t);case 2:n=e.sent,c(n);case 4:case"end":return e.stop()}},e)}))()}catch(e){}},[t]),i?r.a.createElement(Ut,{id:t,title:i.name,date:i.date,description:i.description,scPageUrl:i.scPageUrl,videoUrl:i.videoUrl,minutes:i.minutes,transcript:i.transcript,votes:i.votes}):r.a.createElement(Ye.a,{active:!0})},Nt=Object(y.a)(w.a)({minHeight:"100vh"}),Ft=Object(y.a)(w.a)({marginTop:"2em !important",marginBottom:"5em !important"}),qt=function(e){var t=e.match;return r.a.createElement(Nt,null,r.a.createElement(Ft,null,r.a.createElement(zt,{id:t.params.id})))},Wt=y.a.div({margin:"1em 0 3em !important"}),Vt=y.a.span({display:"block",color:"grey",paddingLeft:"15px",paddingTop:"8px"}),Qt=y.a.span({color:"grey",fontWeight:"700",fontSize:"18px"}),Yt=y.a.div({paddingLeft:"15px"}),Jt=Object(y.a)(N.a)({}),Kt=function(e){e.query;var t=r.a.useState([]),n=Object(I.a)(t,2),a=n[0],i=n[1],c=r.a.useState(!1),o=Object(I.a)(c,2),l=o[0],u=o[1],s=r.a.useState([]),m=Object(I.a)(s,2),p=m[0],d=m[1];Le("Committee Events");r.a.useEffect(function(){Object(R.a)(C.a.mark(function e(){var t,n;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,oe();case 3:return t=e.sent,e.next=6,Promise.all(t.map(function(e){return ge(e.id)}));case 6:n=e.sent,i(n),d(n),u(!1);case 10:case"end":return e.stop()}},e)}))()},[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Wt,null,r.a.createElement(Jt,{placeholder:"Filter by date range",options:[{key:"-1",value:"all",text:"All"},{key:"0.25",value:"0.25",text:"Past week"},{key:"1",value:"1",text:"Past month"},{key:"3",value:"3",text:"Past 3 months"},{key:"6",value:"6",text:"Past 6 months"},{key:"12",value:"12",text:"Past year"}],onChange:function(e,t){var n=t.value;if("all"===n)d(a);else{var r=q.a.utc().subtract(n,"months");d(a.filter(function(e){return function(e){return q.a.utc(e).isAfter(r)}(e.date)}))}}}),r.a.createElement(Vt,null,p.length," results")),r.a.createElement(Yt,null,l?r.a.createElement(Qt,null,"Loading..."):r.a.createElement(He,{events:p})))},Zt=Object(y.a)(w.a)({minHeight:"100vh"}),Gt=Object(y.a)(w.a)({marginTop:"2em !important",marginBottom:"5em !important"}),$t=function(){return r.a.createElement(Zt,null,r.a.createElement(Gt,null,r.a.createElement("h2",null,"All Events"),r.a.createElement(Kt,null)))},Xt=Object(y.a)("div")({display:"flex",flexWrap:"wrap"}),en=Object(y.a)("div")({width:"250px",border:"1px solid #d4d4d5",boxShadow:"0 1px 3px 0 #d4d4d5",padding:"1.5rem",marginBottom:"1.5rem",borderRadius:"3px",marginRight:"2rem",cursor:"pointer",transition:".4s all",":hover":{transform:"scale(1.15)"}}),tn=Object(y.a)("h5")({fontWeight:600,fontSize:"1.2rem"}),nn=Object(b.f)(function(e){var t=e.people,n=e.history;return r.a.createElement(a.Fragment,null,r.a.createElement("h2",null,"Voting History"),r.a.createElement(Xt,null,t.map(function(e){var t=e.full_name,a=e.email,i=e.id;return r.a.createElement(en,{key:t,onClick:function(){return n.push("/people/".concat(i))}},r.a.createElement(tn,null,t),r.a.createElement("p",null,"City Council Member"),r.a.createElement("a",{href:"mailto:".concat(a)},a))})))}),an=function(){var e=Object(a.useState)(null),t=Object(I.a)(e,2),n=t[0],i=t[1];return Le("City Council Members"),Object(a.useEffect)(function(){function e(){return(e=Object(R.a)(C.a.mark(function e(){var t;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se();case 2:t=e.sent,i(t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[]),n?r.a.createElement(nn,{people:n}):r.a.createElement(Ye.a,{active:!0})},rn=Object(y.a)(w.a)({minHeight:"100vh"}),cn=Object(y.a)(w.a)({marginTop:"2em !important",marginBottom:"5em !important"}),on=function(){return r.a.createElement(rn,null,r.a.createElement(cn,null,r.a.createElement(an,null)))},ln=Object(y.a)("div")({display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"}),un=function(e){var t=e.personHistory,n=t.full_name,a=t.email,i=t.phone,c=t.website,o=t.votes;return r.a.createElement(ln,null,r.a.createElement(Ie.a,{style:{padding:"1rem",width:"100%"}},r.a.createElement(Ie.a.Header,null,n),r.a.createElement("a",{href:"mailto:".concat(a)},a),r.a.createElement("div",null,i),r.a.createElement("div",null,"Website:",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:c},c))),r.a.createElement(jt,{votingData:o,isPerson:!0}))},sn=Object(b.f)(function(e){var t=e.match.params.id,n=Object(a.useState)(null),i=Object(I.a)(n,2),c=i[0],o=i[1];return Le(c?c.full_name:"Loading..."),Object(a.useEffect)(function(){function e(){return(e=Object(R.a)(C.a.mark(function e(){var n;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce(t);case 2:n=e.sent,o(n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[t]),c?r.a.createElement(un,{personHistory:c}):r.a.createElement(Ye.a,{active:!0})}),mn=Object(y.a)(w.a)({minHeight:"100vh"}),pn=Object(y.a)(w.a)({marginTop:"2em !important",marginBottom:"5em !important"}),dn=function(){return r.a.createElement(mn,null,r.a.createElement(pn,null,r.a.createElement(sn,null)))};o.a.initialize("UA-145893191-1");var fn=function(){return r.a.createElement(v.a,{basename:"/"},r.a.createElement(x,null),r.a.createElement(b.c,null,r.a.createElement(b.a,{exact:!0,path:"/",component:h(M)}),r.a.createElement(b.a,{path:"/search",component:h(Qe)}),r.a.createElement(b.a,{exact:!0,path:"/events",component:h($t)}),r.a.createElement(b.a,{path:"/events/:id",component:h(qt)}),r.a.createElement(b.a,{exact:!0,path:"/people",component:h(on)}),r.a.createElement(b.a,{exact:!0,path:"/people/:id",component:h(dn)})),r.a.createElement(S,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(fn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[342,1,2]]]);
//# sourceMappingURL=main.d1b2b2c2.chunk.js.map